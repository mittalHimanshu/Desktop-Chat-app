<nav class="navbar navbar-dark fixed-top bg-dark flex-md-nowrap p-0 shadow">
  <a href="javascript: void(0);" class="navbar-brand col-sm-3 col-md-2 mr-0">{{username}}</a>
  <ul class="navbar-nav px-3">
    <li class="nav-item text-nowrap">
      <a href="javascript: void(0);" class="nav-link" (click)="logoutUser()">Sign out</a>
    </li>
  </ul>
</nav>
<div class="container-fluid">
  <div class="row">
    <nav class="d-md-block bg-light sidebar col-md-3 d-block col-sm-3 col-lg-2">
      <div class="sidebar-sticky">
        <ul class="nav flex-column">
          <li class="nav-item" (click)="changeRoom('community')" style="text-align: center;">
            <a href="javascript: void(0);" class="nav-link active" style="font-size: 15px;">
              Community
            </a>
          </li>
          <li class="nav-item" *ngFor="let user of filterUsers()" (click)="changeRoom(user.username)">
            <a href="javascript: void(0);" class="nav-link" style="font-size: 15px;">
              {{user.username}}
              <i *ngIf='user.is_active; else elseBlock' style="margin-left: 8px;" class="fas fa-circle text-success fa-xs"></i>
              <ng-template #elseBlock>
                <i class="fas fa-circle text-secondary fa-xs" style="margin-left: 8px;"></i>
              </ng-template>
              <span class="badge badge-pill badge-primary" style="margin-left: 8px; position: absolute; margin-top: 2px;">4</span>
              <img *ngIf='user.is_typing' src="https://mittalhimanshu151.000webhostapp.com/Images/typing.gif" alt=""
                class="rounded d-none d-sm-block" width="35" height="35" style="margin-top: -9px; float: right;">
            </a>
          </li>
        </ul>
      </div>
    </nav>
    <img *ngIf="isLoading; else loadingComplete" src="assets/gifs/cube.gif">
    <ng-template #loadingComplete>
      <main role="main" class="col-md-9 ml-sm-auto px-4 col-sm-9 col-lg-10" style="height: 100vh;">
        <h2 style="margin-top: 11px;" class="text-center">
          {{room}}
          <div style="font-size: 11px; width: 90px; float: right;" class="text-success">
            Total Online : 24
          </div>
        </h2>
        <div class="my-3 p-3 bg-white rounded box-shadow">
          <div class="media text-muted pt-3" *ngFor="let message of messages">
            <img src="http://chittagongit.com/images/avatar-icon-images/avatar-icon-images-4.jpg" alt="" class="mr-2 rounded"
              width="32" height="32" />
            <p class="media-body pb-3 mb-0 small lh-125 border-bottom border-gray">
              <strong class="d-block text-gray-dark">
                {{message.user.username}}
                <span style="float: right;">
                  {{message.created_at}}
                </span>
              </strong>
              {{message.text}}
            </p>
          </div>
        </div>
        <form style="bottom: 0; position: fixed; padding: 10px; margin-bottom: 6px; border-radius: 5px;" class="col-lg-9 col-md-8 col-sm-8">
          <div class="form-row">
            <div class="col">
              <input [(ngModel)]="message" name="message" (input)="handleTyping()" (blur)="onBlurMethod()" type="text"
                class="form-control" placeholder="Type Here" />
            </div>
            <div>
              <input class="btn bg-success btn-success" type="submit" (click)="sendMessage()" value="Send" />
            </div>
          </div>
        </form>
      </main>
    </ng-template>
  </div>
</div>